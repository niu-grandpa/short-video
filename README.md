# Short Video (short-video)

## 简介

一个短视频在线点播平台

nuxt：无需配置路由-无需导入模块直接使用
pinia：vuex替代品-轻量级-使用方便

## 我的职责

- 使用tailwindcss快速制作页面布局和UI组件开发

- 构建应用数据流，使用pinia定义general、profile、user数据流模块，模块内定义全局状态和数据请求等同异步行为

- 负责首页模块：封装登录注册等组件，....... ，axios拦截响应鉴别session是否过期、重定向登录

- 封装通用上传组件：用于头像和视频上传业务，实现点击和拖拽上传、图像裁剪、资源格式校验，处理资源为blob流url用于上传预览，包装为FormData格式用于上传服务器

- 负责个人页模块：

- 负责视频点播模块：

## 遇到的问题

- npm安装依赖过慢，进度条卡住不动

  - 解决办法：由于淘宝或cnpm的镜像源问题导致过慢，更换腾讯云的npm镜像源

- vue3在setup语法中如何定义props

  - 官方文档中使用defineProps方法并传入数组作为参数，用于定义接收的props

- props解构之后保持响应式
  
  - 使用toRefs方法包裹props，它会返回一个新的响应式对象

- 如何实现文件拖拽上传

  - xxxxxxxxxxxxxxxxxx

- 在组件中通过useNuxtApp导入新增的插件数据为undefined

  - 更改插件配置后需要重启服务器，否则无法识别到

- 接口请求出现跨域问题

  - 使用nginx反向代理。下载nginx接着修改目录下，nginx.conf配置文件，在 location / 里面添加proxy_pass属性，设置前端的url，接着添加location /api/，在里面也添加proxy_pass属性，设置后端url，之后启动nginx服务即可解决

- 页面上很多功能要使用前，需要先判断用户是否登录，但是很多地方都用重复的逻辑判断。

  - 封装一个通用函数，接收回调函数作为参数，在内部判断全局状态中的userId是否存在，如果存在就执行回调函数，不存在就通知登录框弹出

- 首页展示的视频稍微比较多的时候，页面就特别卡

  - xxxxxxxxxxxxxxxx

## 优化点

对于所有输入框组件，内部使用wacth函数监听和对比前后两次值不一致时，才触发change方法执行

## 成果和收获
